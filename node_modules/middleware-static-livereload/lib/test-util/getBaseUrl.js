"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBaseUrlForServer = exports.getBaseUrl = void 0;
const url_1 = require("url");
const getBaseUrl = (addressInfo, pathname = '/') => {
    if (typeof addressInfo === 'object' && addressInfo) {
        const { address, family, port } = addressInfo;
        const hostname = family === 'IPv6' ? `[${address}]` : address;
        return new url_1.URL(pathname, `http://${hostname}:${port}`);
    }
    else {
        throw new Error(`Invalid address: ${addressInfo}`);
    }
};
exports.getBaseUrl = getBaseUrl;
const getBaseUrlForServer = (server, pathname) => exports.getBaseUrl(server.address(), pathname);
exports.getBaseUrlForServer = getBaseUrlForServer;
